{% extends "./base.html" %}

{% block content %}

<div x-data="quizzes()" x-init="fetchQuizzes('/api/quizzes')" class="app">
    <h4>Список викторин</h4>
    <button @click="tab = 'all', fetchQuizzes('/api/quizzes')">Все</button>
    <button @click="tab = 'started', fetchQuizzes('/api/quizzes/started')">Не законченные</button>
    <button @click="tab = 'finished', fetchQuizzes('/api/quizzes/finished')">Законченные</button>
    <div x-show="tab === 'all'">
        <ul>
            <template x-for="quizz in quizzes" :key="quizz.id">
                <li>
                    <span x-text="quizz.title"></span>
                    <button @click="startQuiz(quizz)">Начать</button>
                </li>
            </template>
        </ul>
    </div>
    <div x-show="tab === 'started'">
        <ul>
            <template x-for="quizz in quizzes" :key="quizz.id">
                <li>
                    <span x-text="quizz.title"></span>
                    <button :onclick="`location.href='/quizz/${quizz.slug}'`">Продолжить</button>
                </li>

            </template>
        </ul>
    </div>
    <div x-show="tab === 'finished'">
        <ul>
            <template x-for="quizz in quizzes" :key="quizz.id">
                <li>
                    <span x-text="quizz.title"></span>
                </li>

            </template>
        </ul>
    </div>
</div>

{% endblock %}